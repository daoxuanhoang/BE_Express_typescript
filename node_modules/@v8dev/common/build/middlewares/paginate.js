"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.paginate = void 0;
var paginate = function (req, res, next) {
    var _a = req.query, page = _a.page, perPage = _a.perPage;
    var _page = page ? parseInt(page, 10) : 0;
    var _perPage = perPage ? parseInt(perPage, 10) : 0;
    var errors = [];
    if (!_page || _page < 0)
        errors.push("The page invalid, must be >= 1");
    if (!_perPage || _perPage < 0)
        errors.push("The perPage invalid");
    if (errors.length)
        return res
            .status(400)
            .send({ errors: errors.map(function (message) { return ({ message: message }); }) });
    req.paginate = {
        page: _page,
        perPage: _perPage,
        skip: _page * _perPage - _perPage,
    };
    next();
};
exports.paginate = paginate;

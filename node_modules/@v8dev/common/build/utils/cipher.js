"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.decrypt = exports.encrypt = void 0;
var encrypt = function (text, salt) {
    if (!text || !salt)
        return null;
    var textToChars = function (t) { return t.split("").map(function (c) { return c.charCodeAt(0); }); };
    var byteHex = function (n) { return ("0" + Number(n).toString(16)).substr(-2); };
    var applySaltToChar = function (code) {
        return textToChars(salt).reduce(function (a, b) { return a ^ b; }, code);
    };
    return text
        .split("")
        .map(textToChars)
        .map(applySaltToChar)
        .map(byteHex)
        .join("");
};
exports.encrypt = encrypt;
var decrypt = function (encoded, salt) {
    if (!encoded || !salt)
        return null;
    var textToChars = function (text) {
        return text.split("").map(function (c) { return c.charCodeAt(0); });
    };
    var applySaltToChar = function (code) {
        return textToChars(salt).reduce(function (a, b) { return a ^ b; }, code);
    };
    var matchs = encoded.match(/.{1,2}/g);
    if (!matchs || !matchs.length)
        return null;
    var parser = matchs
        .map(function (hex) { return parseInt(hex, 16); })
        .map(applySaltToChar)
        .map(function (charCode) { return String.fromCharCode(charCode); });
    if (parser.some(function (i) { return /[\x00-\x1f]/.test(i); }))
        return null;
    return parser.join("");
};
exports.decrypt = decrypt;
